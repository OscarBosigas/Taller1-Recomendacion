<!DOCTYPE html>
<html>
<head>
    <title>Iniciar sesión</title>
</head>
<body>
    <h2>Iniciar sesión</h2>
    <form id="loginForm" method="post" action="http://localhost:5000/api/auth/login">
        <p>Usuario: <input type="text" name="id" id="id"></p>
        <p>Contraseña: <input type="password" name="password" id="password"></p>
        <p><input type="submit" value="Iniciar sesión"></p>
    </form>

    <script>
        document.getElementById('loginForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Evitar que el formulario se envíe de forma tradicional
            
            // Obtener los datos del formulario
            var id = document.getElementById('id').value;
            var password = document.getElementById('password').value;
            
            // Crear una solicitud XMLHttpRequest
            var xhr = new XMLHttpRequest();
            xhr.open('POST', 'http://localhost:5000/api/auth/login', true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    // Procesar la respuesta JSON
                    var response = JSON.parse(xhr.responseText);
                    // Manejar la respuesta
                    console.log(response.mensaje);
                    console.log(response.token);
                    // Realizar otras acciones en función de la respuesta
                }
            };
            // Enviar los datos del formulario como JSON al backend
            xhr.send(JSON.stringify({id: id, password: password}));
        });
    </script>
</body>
</html>
